<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>MozPDX Lunch Signups</title>

    <link rel="stylesheet" href="normalize.css" type="text/css">
    <link rel="stylesheet" href="gh-fork-ribbon.css" type="text/css">
    <style>
      .container {
        width: 960px;
        margin: 0 auto;
      }

      .week iframe {
        width: 100%;
        height: 600px;
      }
    </style>
  </head>
  <body>
    <div class="github-fork-ribbon-wrapper right">
        <div class="github-fork-ribbon">
            <a href="https://github.com/Osmose/mozpdx-lunch">Fork me on GitHub</a>
        </div>
    </div>
    <div class="container">
      <h1>MozPDX Lunch Signups</h1>
      <div class="week-container">
        <div class="this week">
          <h2>This Week (<span class="this-week-date"></span>)</h2>
          <iframe></iframe>
        </div>
        <div class="next week">
          <h2>Next Week (<span class="next-week-date"></span>)</h2>
          <iframe></iframe>
        </div>
        <div class="next-next week">
          <h2>Next Next Week (<span class="next-next-week-date"></span>)</h2>
          <iframe></iframe>
        </div>
      </div>
    </div>
    <script src="moment.js"></script>
    <script>
      var thisMonday = moment().day(1);
      var frame = document.querySelector('.this.week iframe');
      var thisEtherpad = 'https://public.etherpad-mozilla.org/p/MozPDX_Lunch_' + thisMonday.format('YYYY-MM-DD');
      frame.src = thisEtherpad;
      var thisWeekDate = document.querySelector('.this-week-date');
      thisWeekDate.innerHTML = "<a href="+thisEtherpad+">"+thisMonday.format('MMMM DD')+"</a>";

      var nextMonday = thisMonday.add(1, 'week');
      frame = document.querySelector('.next.week iframe');
      var nextEtherpad = 'https://public.etherpad-mozilla.org/p/MozPDX_Lunch_' + nextMonday.format('YYYY-MM-DD');
      frame.src = nextEtherpad;
      var nextWeekDate = document.querySelector('.next-week-date');
      nextWeekDate.innerHTML = "<a href="+nextEtherpad+">"+nextMonday.format('MMMM DD')+"</a>";

      var nextNextMonday = nextMonday.add(1, 'week');
      frame = document.querySelector('.next-next.week iframe');
      var nextNextEtherpad = 'https://public.etherpad-mozilla.org/p/MozPDX_Lunch_' + nextMonday.format('YYYY-MM-DD');
      frame.src = nextNextEtherpad;
      var nextNextWeekDate = document.querySelector('.next-next-week-date');
      nextNextWeekDate.innerHTML = "<a href="+nextNextEtherpad+">"+nextNextMonday.format('MMMM DD')+"</a>";
    </script>
  </body>
</html>
